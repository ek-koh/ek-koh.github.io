---
title:  "정형데이터 (2) - SQL"
excerpt: "빅데이터 수집 / 전처리 : 정형데이터 (2) - SQL"
toc: true
toc_sticky: true

categories:
  - Data Collection
tags:
  - [Data Collection, DBMS, RDBMS, SQL, Data type, DDL, DML, SQLite]
last_modified_at: 2020-07-14 15:26:49
---

## 1. SQL 구문 기본 구조
- 문(Statement), 절(Clause), 식(Expression), 술어(Predicate)
- SQL문을 사용할 때 굳이 대문자를 쓰지는 않아도 되지만, 명령에 해당하는 것들은 관습적으로 대문자로 쓰며, 테이블명, 파라미터 등은 소문자료 쓴다.
- 하나의 문을 끝낼 때 ;을 사용한다.

```sql
-- Statement : 전체구문
-- Expression : population + 1, 'USA'
-- Predicate : name = 'USA'

UPDATE country      -- UPDATE clause
SET population = population + 1     -- SET clause
WHERE name = 'USA';     -- WHERE clause
```

## 2. Data Type
RDBMS마다 조금씩 차이가 있을 수 있다.

- Boolean (BOOLEAN)
- Character (CHAR, VARCHAR)
    - 길이 제한: CHAR(3)을 사용하면 'IN', 'OUT'은 원래대로 출력되지만 'INOUT'은 제대로 출력되지 않는다.
- Exact numeric (NUMERIC, DECIMAL, INTEGER, SMALLINT, BIGINT)
- Approximate numeric (REAL, FLOAT, DOUBLE)
- Datetime (DATE, TIME, TIMESTAMP)
- Large Object (CLOB, BLOB)
    - CLOB: Character String
    - BLOB: Binary String

## 3. DDL, DML
### (1) DDL
- CREATE
- DROP
    - 테이블 자체를 제거
- TRUNCATE
    - 테이블 내의 모든 데이터를 삭제할 때 사용
    - DELETE보다 빠름
- ALTER

### (2) DML
- SELECT

    - ```sql 
        SELECT [ALL | DISTINCT] 컬럼명 [,컬럼명...]
        FROM 테이블명 [,테이블명...]
        [WHERE 조건식]
        [GROUP BY 컬럼명[,컬럼명...] [HAVING 조건식]]
        [ORDER BY 컬럼명[,컬럼명...]]
        ```
    - 모든 컬럼을 가져오고자 할 때는 `*` 사용
    - WHERE절에 사용할 수 있는 연산자

        | Operator | Description |
        |:--------:|-------------|
        |=         |Equal        |
        |<>        |Not equal    |
        |>         |Greater than |
        |<         |Less than    |
        |>=        |Greater than or equal |
        |<=        |Less than or equal |
        |BETWEEN   |Between an inclusive range |
        |LIKE      |Search for a pattern (%, _)|
        |IN        |To specify multiple possible values for a column |

- INSERT
    - `INSERT INTO 테이블명 (컬럼명) VALUES 입력값`
    - 컬럼의 수와 입력값의 수는 일치해야 함
    - 컬럼명을 입력하지 않으면 모든 컬럼에 입력된다는 뜻
- UPDATE
    - ```sql
        UPDATE 테이블
        SET 컬럼명 = 값, 컬럼명 = 값,...
        WHERE 조건
      ```

    - WHERE절을 쓰지 않으면 모든 데이터가 바뀔 수 있으므로 조심할 것
- DELETE
    - ```sql
        DELETE FROM 테이블명
        WHERE 조건
      ```

    - 하나 이상의 row를 삭제할 때 사용
    - WHERE절을 쓰지 않으면 모든 데이터가 삭제될 수 있음
    - 데이터만 지워지는 것이므로 모든 데이터를 지워도 auto increment가 되어 있으면 새로운 값을 입력했을 때 1부터 시작 안할 수 있음. `TRUNCATE`는 1부터 시작 가능


## 4. JOIN
![image](https://user-images.githubusercontent.com/58713684/87371693-dbc90b00-c5c0-11ea-8e91-dc6391fe06f3.png)

- INNER JOIN
    - ```sql
        SELECT 테이블명.컬럼명, 테이블명.컬럼명...
        FROM 테이블명
        INNER JOIN 테이블명 ON
        테이블명.컬럼명 = 테이블명.컬럼명
      ```

- LEFT JOIN
    - ```sql
        SELECT 테이블명.컬럼명, 테이블명.컬럼명...
        FROM 테이블명
        LEFT OUTER JOIN 테이블명 ON
        테이블명.컬럼명 = 테이블명.컬럼명
      ```

- RIHGT JOIN
    - ```sql
        SELECT 테이블명.컬럼명, 테이블명.컬럼명...
        FROM 테이블명
        RIGHT OUTER JOIN 테이블명 ON
        테이블명.컬럼명 = 테이블명.컬럼명
      ```
- FULL OUTER JOIN
    - ```sql
        SELECT 테이블명.컬럼명, 테이블명.컬럼명...
        FROM 테이블명
        FULL OUTER JOIN 테이블명 ON
        테이블명.컬럼명 = 테이블명.컬럼명
      ```

- CROSS JOIN
    - 조합 가능한 모든 종류의 쌍 생성
    - 사용하지 않는 게 좋음
    - ```sql
        SELECT *
        FROM 테이블명 CROSS JOIN 테이블명;
      ```








